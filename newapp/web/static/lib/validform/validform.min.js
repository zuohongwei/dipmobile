(function(e,g,c){var h=null,k=null,j=true;var f={tit:"提示信息",w:{"*":"不能为空！","*6-16":"请填写6到16位任意字符！",n:"请填写数字！","n6-16":"请填写6到16位数字！",s:"不能输入特殊字符！","s6-18":"请填写6到18位字符！",p:"请填写邮政编码！",m:"请填写手机号码！",e:"邮箱地址格式不对！",url:"请填写网址！"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…",raido:"请选中一项",checkbox:"请至少选择一项"};e.Tipmsg=f;var a=function(m,o,l){var o=e.extend({},a.defaults,o);o.datatype&&e.extend(a.util.dataType,o.datatype);var n=this;n.tipmsg={w:{}};n.forms=m;n.objects=[];if(l===true){return false}m.each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var q=this;q.settings=e.extend({},o);var p=e(q);q.validform_status="normal";p.data("tipmsg",n.tipmsg);p.delegate("[datatype]:visible","blur change",function(){var t=e(this).attr("aspect");if(t&&t=="self"){e(this).css("border","solid 1px red")}else{var u=false;var v=e(this).parent();if(e(this).parent().next().find("button").length>0){u=true;v=e(this).parent().next()}if(e(this).attr("type")=="text"||e(this).attr("type")=="password"){v.find(".Validform_wrong").show().siblings(".valid-arrow-bottom").show()}}var r=arguments[1];var s=a.util.check.call(this,p,r);if(s){if(t&&t=="self"){e(this).css("border","")}}});p.delegate("[datatype]:visible","focus",function(){var r=e(this).attr("aspect");if(r&&r=="self"){e(this).css("border","")}else{var s=false;var t=e(this).parent();if(e(this).parent().next().find("button").length>0){s=true;t=e(this).parent().next()}if(e(this).attr("type")=="text"||e(this).attr("type")=="password"){t.find(".Validform_wrong").hide().siblings(".valid-arrow-bottom").hide()}else{if(e(this).attr("type")=="radio"){e(this).parent().siblings(".Validform_wrong").hide().siblings(".valid-arrow-bottom").hide()}else{if(e(this).attr("type")=="checkbox"){e(this).siblings(".Validform_wrong").hide().siblings(".valid-arrow-bottom").hide()}}}}});p.delegate("[datatype]:visible","change",function(){});p.delegate("[datatype]:visible","keypress",function(v){var u=e(this).attr("datatype");if(!a.util.middleValidate[u]){return}var r=v.keyCode||v.charCode||v.which;if((r>=8&&r<=46)||r==108){return}var s=String.fromCharCode(r);var t=a.util.middleValidate[u].single?a.util.middleValidate[u].single.test(s):true;return t});p.delegate(":text","keypress",function(r){if(r.keyCode==13&&p.find(":submit").length==0){p.submit()}});a.util.enhance.call(p,q.settings.tiptype,q.settings.usePlugin,q.settings.tipSweep);q.settings.btnSubmit&&p.find(q.settings.btnSubmit).bind("click",function(){p.trigger("submit");return false});p.submit(function(){var r=a.util.submitForm.call(p,q.settings);r===c&&(r=true);return r});p.find("[type='reset']").add(p.find(q.settings.btnReset)).bind("click",function(){a.util.resetForm.call(p)})});if(o.tiptype==1||(o.tiptype==2||o.tiptype==3)&&o.ajaxPost){d()}};function b(o,n){if(o.selectionStart||o.selectionStart=="0"){var m=o.selectionStart;var l=o.selectionEnd;return o.value.substring(0,m)+n+o.value.substring(l,o.value.length)}else{if(document.selection){if(document.selection.type=="Text"){document.selection.clear()}var p=document.selection.createRange();p.text=n;return o.value}else{return o.value}}}a.defaults={tiptype:1,tipSweep:false,showAllError:false,postonce:false,ajaxPost:false};a.util={dataType:{"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^-?\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^13[0-9]{9}$|14[0-9]{9}$|15[0-9]{9}$|17[0-9]{9}$|18[0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/,f:/^-?\d+(\.\d+)?$/,t:/(^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$)|(^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|17[0-9]{9}$|18[0-9]{9}$)/},middleValidate:{n:{single:/^[0-9-]$/,},f:{single:/^[0-9.-]$/,middle:/^-?([0-9]\d*\.\d*|0\.\d*[0-9]\d*|0?\.0+|0)$/}},toString:Object.prototype.toString,isEmpty:function(l){return l===""||l===e.trim(this.attr("tip"))},getValue:function(n){var m,l=this;if(n.is(":radio")){m=l.find(":radio[name='"+n.attr("name")+"']:checked").val();m=m===c?"":m}else{if(n.is(":checkbox")){m="";l.find(":checkbox[name='"+n.attr("name")+"']:checked").each(function(){m+=e(this).val()+","});m=m===c?"":m}else{if(n.is("div")){m=n[0].trueValue}else{m=n.val()}}}m=e.trim(m);return a.util.isEmpty.call(n,m)?"":m},enhance:function(m,n,o,l){var p=this;p.find("[datatype]:visible").each(function(){if(m==2){if(e(this).parent().next().find(".Validform_checktip").length==0){e(this).parent().next().append("<span class='Validform_checktip' />");e(this).siblings(".Validform_checktip").remove()}}else{if(m==3||m==4){}}});p.find("input[recheck]").each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var r=e(this);var q=p.find("input[name='"+e(this).attr("recheck")+"']");q.bind("keyup",function(){if(q.val()==r.val()&&q.val()!=""){if(q.attr("tip")){if(q.attr("tip")==q.val()){return false}}r.trigger("blur")}}).bind("blur",function(){if(q.val()!=r.val()&&r.val()!=""){if(r.attr("tip")){if(r.attr("tip")==r.val()){return false}}r.trigger("blur")}})});p.find("[tip]").each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var r=e(this).attr("tip");var q=e(this).attr("altercss");e(this).focus(function(){if(e(this).val()==r){e(this).val("");if(q){e(this).removeClass(q)}}}).blur(function(){if(e.trim(e(this).val())===""){e(this).val(r);if(q){e(this).addClass(q)}}})});p.find(":checkbox[datatype]:visible,:radio[datatype]:visible").each(function(){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";var r=e(this);var q=r.attr("name");p.find("[name='"+q+"']").filter(":checkbox,:radio").bind("click",function(){setTimeout(function(){r.trigger("blur")},0)})});p.find("select[datatype]:visible[multiple]").bind("click",function(){var q=e(this);setTimeout(function(){q.trigger("blur")},0)});a.util.usePlugin.call(p,n,m,o,l)},usePlugin:function(p,m,o,s){var t=this,p=p||{};if(t.find("input[plugin='swfupload']").length&&typeof(swfuploadhandler)!="undefined"){var l={custom_settings:{form:t,showmsg:function(w,u,v){a.util.showmsg.call(t,w,m,{obj:t.find("input[plugin='swfupload']"),type:u,sweep:o})}}};l=e.extend(true,{},p.swfupload,l);t.find("input[plugin='swfupload']").each(function(u){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";e(this).val("");swfuploadhandler.init(l,u)})}if(t.find("input[plugin='datepicker']").length&&e.fn.datePicker){p.datepicker=p.datepicker||{};if(p.datepicker.format){Date.format=p.datepicker.format;delete p.datepicker.format}if(p.datepicker.firstDayOfWeek){Date.firstDayOfWeek=p.datepicker.firstDayOfWeek;delete p.datepicker.firstDayOfWeek}t.find("input[plugin='datepicker']").each(function(u){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";p.datepicker.callback&&e(this).bind("dateSelected",function(){var v=new Date(e.event._dpCache[this._dpId].getSelected()[0]).asString(Date.format);p.datepicker.callback(v,this)});e(this).datePicker(p.datepicker)})}if(t.find("input[plugin*='passwordStrength']").length&&e.fn.passwordStrength){p.passwordstrength=p.passwordstrength||{};p.passwordstrength.showmsg=function(v,w,u){a.util.showmsg.call(t,w,m,{obj:v,type:u,sweep:o})};t.find("input[plugin='passwordStrength']").each(function(u){if(this.validform_inited=="inited"){return true}this.validform_inited="inited";e(this).passwordStrength(p.passwordstrength)})}if(s!="addRule"&&p.jqtransform&&e.fn.jqTransSelect){if(t[0].jqTransSelected=="true"){return}t[0].jqTransSelected="true";var n=function(u){var v=e(".jqTransformSelectWrapper ul:visible");v.each(function(){var w=e(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);if(!(u&&w.oLabel&&w.oLabel.get(0)==u.get(0))){e(this).hide()}})};var q=function(u){if(e(u.target).parents(".jqTransformSelectWrapper").length===0){n(e(u.target))}};var r=function(){e(document).mousedown(q)};if(p.jqtransform.selector){t.find(p.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton();t.find(p.jqtransform.selector).filter("input:text, input:password").jqTransInputText();t.find(p.jqtransform.selector).filter("input:checkbox").jqTransCheckBox();t.find(p.jqtransform.selector).filter("input:radio").jqTransRadio();t.find(p.jqtransform.selector).filter("textarea").jqTransTextarea();if(t.find(p.jqtransform.selector).filter("select").length>0){t.find(p.jqtransform.selector).filter("select").jqTransSelect();r()}}else{t.jqTransform()}t.find(".jqTransformSelectWrapper").find("li a").click(function(){e(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")})}},getNullmsg:function(p){var o=this;var n=/[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g;var l;var m=p[0].settings.label||".Validform_label";m=o.siblings(m).eq(0).text()||o.siblings().find(m).eq(0).text()||o.parent().siblings(m).eq(0).text()||o.parent().siblings().find(m).eq(0).text();m=m.replace(/\s(?![a-zA-Z])/g,"").match(n);m=m?m.join(""):[""];n=/\{(.+)\|(.+)\}/;l=p.data("tipmsg").s||f.s;if(m!=""){l=l.replace(/\{0\|(.+)\}/,m);if(o.attr("recheck")){l=l.replace(/\{(.+)\}/,"");o.attr("nullmsg",l);return l}}else{l=o.is(":checkbox,:radio,select")?l.replace(/\{0\|(.+)\}/,""):l.replace(/\{0\|(.+)\}/,"$1")}l=o.is(":checkbox,:radio,select")?l.replace(n,"$2"):l.replace(n,"$1");o.attr("nullmsg",l);return l},getErrormsg:function(t,o,v){var p=/^(.+?)((\d+)-(\d+))?$/,n=/^(.+?)(\d+)-(\d+)$/,m=/(.*?)\d+(.+?)\d+(.*)/,r=o.match(p),u,s;if(v=="recheck"){s=t.data("tipmsg").reck||f.reck;return s}var q=e.extend({},f.w,t.data("tipmsg").w);if(r[0] in q){return t.data("tipmsg").w[r[0]]||f.w[r[0]]}for(var l in q){if(l.indexOf(r[1])!=-1&&n.test(l)){s=(t.data("tipmsg").w[l]||f.w[l]).replace(m,"$1"+r[3]+"$2"+r[4]+"$3");t.data("tipmsg").w[r[0]]=s;return s}}return t.data("tipmsg").def||f.def},_regcheck:function(u,o,v,B){var B=B,z=null,w=false,p=/\/.+\//g,l=/^(.+?)(\d+)-(\d+)$/,m=3;if(p.test(u)){var t=u.match(p)[0].slice(1,-1);var s=u.replace(p,"");var r=RegExp(t,s);w=r.test(o)}else{if(a.util.toString.call(a.util.dataType[u])=="[object Function]"){w=a.util.dataType[u](o,v,B,a.util.dataType);if(w===true||w===c){w=true}else{z=w;w=false}}else{if(u=="checkbox"||u=="radio"){if(o!=""!=undefined&&o!=""){w=true}}else{if(!(u in a.util.dataType)){var n=u.match(l),A;if(!n){w=false;z=B.data("tipmsg").undef||f.undef}else{for(var C in a.util.dataType){A=C.match(l);if(!A){continue}if(n[1]===A[1]){var x=a.util.dataType[C].toString(),s=x.match(/\/[mgi]*/g)[1].replace("/",""),y=new RegExp("\\{"+A[2]+","+A[3]+"\\}","g");x=x.replace(/\/[mgi]*/g,"/").replace(y,"{"+n[2]+","+n[3]+"}").replace(/^\//,"").replace(/\/$/,"");a.util.dataType[u]=new RegExp(x,s);break}}}}}if(a.util.toString.call(a.util.dataType[u])=="[object RegExp]"){w=a.util.dataType[u].test(o)}}}if(w){m=2;z=v.attr("sucmsg")||B.data("tipmsg").r||f.r;if(v.attr("recheck")){var q=B.find("input[name='"+v.attr("recheck")+"']:first");if(o!=q.val()){w=false;m=3;z=v.attr("errormsg")||a.util.getErrormsg.call(v,B,u,"recheck")}}}else{z=z||v.attr("errormsg")||a.util.getErrormsg.call(v,B,u);if(a.util.isEmpty.call(v,o)){z=v.attr("nullmsg")||a.util.getNullmsg.call(v,B)}}return{passed:w,type:m,info:z}},regcheck:function(o,u,n,t){var v=this,l=null,m=false,s=3;if(n.attr("datamust")===""&&a.util.isEmpty.call(n,u)){if(n.data("cked")){l=""}return{passed:true,type:4,info:l}}if(n.attr("ignore")==="ignore"&&a.util.isEmpty.call(n,u)){if(n.data("cked")){l=""}return{passed:true,type:4,info:l}}n.data("cked","cked");var w=a.util.parseDatatype(o);var r;for(var q=0;q<w.length;q++){for(var p=0;p<w[q].length;p++){r=a.util._regcheck(w[q][p],u,n,v);if(!r.passed){break}}if(r.passed){break}}return r},parseDatatype:function(s){var r=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,p=s.match(r),q=s.replace(r,"").replace(/\s*/g,"").split(""),o=[],l=0;o[0]=[];o[0].push(p[0]);for(var t=0;t<q.length;t++){if(q[t]=="|"){l++;o[l]=[]}o[l].push(p[t+1])}return o},showmsg:function(n,u,m,p){if(n==c){return}if(p=="bycheck"&&m.sweep&&(m.obj&&!m.obj.is(".Validform_error")||typeof u=="function")){return}e.extend(m,{curform:this});if(typeof u=="function"){u(n,m,a.util.cssctl);return}if(u==1||p=="byajax"&&u!=4){k.find(".Validform_info").html(n)}if(u==1&&p!="bycheck"&&m.type!=2||p=="byajax"&&u!=4){j=false;k.find(".iframe").css("height",k.outerHeight());k.show();i(k,100)}if(u==2&&m.obj){m.obj.parent().next().find(".Validform_checktip").html(n);a.util.cssctl(m.obj.parent().next().find(".Validform_checktip"),m.type)}if((u==3||u==4)&&m.obj){var t=m.obj;var w=t.parent();var s=false;var l=t.attr("aspect")||"top";var y=false;if(w.next().length>0&&w.next().find("button").length>0){y=true;w=w.next()}if(l&&l=="self"){s=false}else{if((w.hasClass("input-group")||t.attr("type")=="text"||t.attr("type")=="password")&&w.find(".Validform_checktip").length>0){s=false}else{if(t.attr("type")=="radio"&&w.parent().siblings(".Validform_checktip").length>0){s=false}else{if(t.attr("type")=="checkbox"&&t.siblings(".Validform_checktip").length>0){s=false}else{s=true}}}}if(s){var r=e("<div class='alert alert-danger Validform_checktip checktip-aspect-"+l+"' role='alert' > "+n+"</div>");var v=e("<div class='valid-arrow-bottom arrow-aspect-"+l+"'></div>");if(l=="right"){var x=t.outerHeight();if(t.attr("type")=="radio"){x=w.outerHeight()}r.css({height:x+"px","line-height":x+"px"})}else{var q=t.position().left;if(q==0||q==w.css("padding-left").replace("px","")){q=t.css("padding-left").replace("px","")}r.css("left",q+"px");v.css("left",(Number(q)+10)+"px")}t.after(r).after(v)}else{if(l&&l=="self"){m.obj.css("border","solid 1px red")}else{t.siblings(".validform-checktip").html(n)}}if(l&&l=="self"){switch(m.type){case 1:m.obj.css("border","");break;case 2:m.obj.css("border","");break;case 4:m.obj.css("border","");break;default:m.obj.css("border","solid 1px red")}}else{a.util.cssctl(t.siblings(".Validform_checktip"),m.type)}}},cssctl:function(m,l){switch(l){case 1:m.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");break;case 2:m.removeClass("Validform_wrong").addClass("Validform_right").hide().siblings(".valid-arrow-bottom").hide();break;case 4:m.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");break;default:m.removeClass("Validform_right").addClass("Validform_wrong").show().siblings(".valid-arrow-bottom").show()}},check:function(w,u,o){var p=w[0].settings;var u=u||"";var l=a.util.getValue.call(w,e(this));if(p.ignoreHidden&&e(this).is(":hidden")||e(this).data("dataIgnore")==="dataIgnore"){return true}if(p.dragonfly&&!e(this).data("cked")&&a.util.isEmpty.call(e(this),l)&&e(this).attr("ignore")!="ignore"){return false}var t=a.util.regcheck.call(w,e(this).attr("datatype"),l,e(this),e(this).attr("datamust"));if(l==this.validform_lastval&&!e(this).attr("recheck")&&u==""){return t.passed?true:false}this.validform_lastval=l;var s;h=s=e(this);if(!t.passed){a.util.abort.call(s[0]);if(!o){a.util.showmsg.call(w,t.info,p.tiptype,{obj:e(this),type:t.type,sweep:p.tipSweep},"bycheck");!p.tipSweep&&s.addClass("Validform_error")}return false}var r=e(this).attr("ajaxurl");if(r&&!a.util.isEmpty.call(e(this),l)&&!o){var n=e(this);if(u=="postform"){n[0].validform_subpost="postform"}else{n[0].validform_subpost=""}if(n[0].validform_valid==="posting"&&l==n[0].validform_ckvalue){return"ajax"}n[0].validform_valid="posting";n[0].validform_ckvalue=l;a.util.showmsg.call(w,w.data("tipmsg").c||f.c,p.tiptype,{obj:n,type:1,sweep:p.tipSweep},"bycheck");a.util.abort.call(s[0]);var v=e.extend(true,{},p.ajaxurl||{});var q={type:"POST",cache:false,url:r,data:"param="+encodeURIComponent(l)+"&name="+encodeURIComponent(e(this).attr("name")),success:function(y){if(e.trim(y.status)==="y"){n[0].validform_valid="true";y.info&&n.attr("sucmsg",y.info);a.util.showmsg.call(w,n.attr("sucmsg")||w.data("tipmsg").r||f.r,p.tiptype,{obj:n,type:2,sweep:p.tipSweep},"bycheck");s.removeClass("Validform_error");h=null;if(n[0].validform_subpost=="postform"){w.trigger("submit")}}else{n[0].validform_valid=y.info;a.util.showmsg.call(w,y.info,p.tiptype,{obj:n,type:3,sweep:p.tipSweep});s.addClass("Validform_error")}s[0].validform_ajax=null},error:function(y){if(y.status=="200"){if(y.responseText=="y"){v.success({status:"y"})}else{v.success({status:"n",info:y.responseText})}return false}if(y.statusText!=="abort"){var z="status: "+y.status+"; statusText: "+y.statusText;a.util.showmsg.call(w,z,p.tiptype,{obj:n,type:3,sweep:p.tipSweep});s.addClass("Validform_error")}n[0].validform_valid=y.statusText;s[0].validform_ajax=null;return true}};if(v.success){var x=v.success;v.success=function(y){q.success(y);x(y,n)}}if(v.error){var m=v.error;v.error=function(y){q.error(y)&&m(y,n)}}v=e.extend({},q,v,{dataType:"json"});s[0].validform_ajax=e.ajax(v);return"ajax"}else{if(r&&a.util.isEmpty.call(e(this),l)){a.util.abort.call(s[0]);s[0].validform_valid="true"}}if(!o){a.util.showmsg.call(w,t.info,p.tiptype,{obj:e(this),type:t.type,sweep:p.tipSweep},"bycheck");s.removeClass("Validform_error")}h=null;return true},submitForm:function(p,m,l,s,u){var x=this;if(x[0].validform_status==="posting"){return false}if(p.postonce&&x[0].validform_status==="posted"){return false}var w=p.beforeCheck&&p.beforeCheck(x);if(w===false){return false}var t=true,o;x.find("[datatype]:visible").each(function(){if(m){return false}if(p.ignoreHidden&&e(this).is(":hidden")||e(this).data("dataIgnore")==="dataIgnore"){return true}var A=a.util.getValue.call(x,e(this)),B;h=B=e(this);o=a.util.regcheck.call(x,e(this).attr("datatype"),A,e(this),e(this).attr("datamust"));if(!o.passed){a.util.showmsg.call(x,o.info,p.tiptype,{obj:e(this),type:o.type,sweep:p.tipSweep});B.addClass("Validform_error");if(!p.showAllError){B.focus();t=false;return false}t&&(t=false);return true}if(e(this).attr("ajaxurl")&&!a.util.isEmpty.call(e(this),A)){if(this.validform_valid!=="true"){var z=e(this);a.util.showmsg.call(x,x.data("tipmsg").v||f.v,p.tiptype,{obj:z,type:3,sweep:p.tipSweep});B.addClass("Validform_error");z.trigger("blur",["postform"]);if(!p.showAllError){t=false;return false}t&&(t=false);return true}}else{if(e(this).attr("ajaxurl")&&a.util.isEmpty.call(e(this),A)){a.util.abort.call(this);this.validform_valid="true"}}a.util.showmsg.call(x,o.info,p.tiptype,{obj:e(this),type:o.type,sweep:p.tipSweep});B.removeClass("Validform_error");h=null});if(p.showAllError){x.find(".Validform_error:first").focus()}if(t){var r=p.beforeSubmit&&p.beforeSubmit(x);if(r===false){return false}x[0].validform_status="posting";if(p.ajaxPost||s==="ajaxPost"){var v=e.extend(true,{},p.ajaxpost||{});v.url=l||v.url||p.url||x.attr("action");a.util.showmsg.call(x,x.data("tipmsg").p||f.p,p.tiptype,{obj:x,type:1,sweep:p.tipSweep},"byajax");if(u){v.async=false}else{if(u===false){v.async=true}}if(v.success){var y=v.success;v.success=function(z){p.callback&&p.callback(z);x[0].validform_ajax=null;if(e.trim(z.status)==="y"){x[0].validform_status="posted"}else{x[0].validform_status="normal"}y(z,x)}}if(v.error){var n=v.error;v.error=function(z){p.callback&&p.callback(z);x[0].validform_status="normal";x[0].validform_ajax=null;n(z,x)}}var q={type:"POST",async:true,data:x.serializeArray(),success:function(z){if(e.trim(z.status)==="y"){x[0].validform_status="posted";a.util.showmsg.call(x,z.info,p.tiptype,{obj:x,type:2,sweep:p.tipSweep},"byajax")}else{x[0].validform_status="normal";a.util.showmsg.call(x,z.info,p.tiptype,{obj:x,type:3,sweep:p.tipSweep},"byajax")}p.callback&&p.callback(z);x[0].validform_ajax=null},error:function(z){var A="status: "+z.status+"; statusText: "+z.statusText;a.util.showmsg.call(x,A,p.tiptype,{obj:x,type:3,sweep:p.tipSweep},"byajax");p.callback&&p.callback(z);x[0].validform_status="normal";x[0].validform_ajax=null}};v=e.extend({},q,v,{dataType:"json"});x[0].validform_ajax=e.ajax(v)}else{if(!p.postonce){x[0].validform_status="normal"}var l=l||p.url;if(l){x.attr("action",l)}return p.callback&&p.callback(x)}}return false},resetForm:function(){var l=this;l.each(function(){this.reset&&this.reset();this.validform_status="normal"});l.find(".Validform_right").text("");l.find(".passwordStrength").children().removeClass("bgStrength");l.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading");l.find(".Validform_error").removeClass("Validform_error");l.find("[datatype]:visible").removeData("cked").removeData("dataIgnore").each(function(){this.validform_lastval=null});l.eq(0).find("input:first").focus()},abort:function(){if(this.validform_ajax){this.validform_ajax.abort()}}};e.Datatype=a.util.dataType;a.prototype={dataType:a.util.dataType,eq:function(m){var l=this;if(m>=l.forms.length){return null}if(!(m in l.objects)){l.objects[m]=new a(e(l.forms[m]).get(),{},true)}return l.objects[m]},resetStatus:function(){var l=this;e(l.forms).each(function(){this.validform_status="normal"});return this},setStatus:function(l){var m=this;e(m.forms).each(function(){this.validform_status=l||"posting"});return this},getStatus:function(){var m=this;var l=e(m.forms)[0].validform_status;return l},ignore:function(l){var m=this;var l=l||"[datatype]:visible";e(m.forms).find(l).each(function(){e(this).data("dataIgnore","dataIgnore").removeClass("Validform_error")});return this},unignore:function(l){var m=this;var l=l||"[datatype]:visible";e(m.forms).find(l).each(function(){e(this).removeData("dataIgnore")});return this},addRule:function(p){var n=this;var p=p||[];for(var m=0;m<p.length;m++){var q=e(n.forms).find(p[m].ele);for(var l in p[m]){l!=="ele"&&q.attr(l,p[m][l])}}e(n.forms).each(function(){var o=e(this);a.util.enhance.call(o,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep,"addRule")});return this},ajaxPost:function(l,n,m){var o=this;e(o.forms).each(function(){if(this.settings.tiptype==1||this.settings.tiptype==2||this.settings.tiptype==3){d()}a.util.submitForm.call(e(o.forms[0]),this.settings,l,m,"ajaxPost",n)});return this},submitForm:function(l,m){var n=this;e(n.forms).each(function(){var o=a.util.submitForm.call(e(this),this.settings,l,m);o===c&&(o=true);if(o===true){this.submit()}});return this},resetForm:function(){var l=this;a.util.resetForm.call(e(l.forms));return this},abort:function(){var l=this;e(l.forms).each(function(){a.util.abort.call(this)});return this},check:function(n,l){var o,q=this,p=e(q.forms),m=true;if(e(q.forms).is(":hidden")){o=l||"[datatype]"}else{o=l||"[datatype]:visible"}p.find(o).each(function(){a.util.check.call(this,p,"",n)||(m=false)});return m},config:function(l){var m=this;l=l||{};e(m.forms).each(function(){var n=e(this);this.settings=e.extend(true,this.settings,l);a.util.enhance.call(n,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep)});return this}};function i(o,n){var m=(e(window).width()-o.outerWidth())/2,l=(e(window).height()-o.outerHeight())/2,l=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+(l>0?l:0);o.css({left:m}).animate({top:l},{duration:n,queue:false})}function d(){if(e("#Validform_msg").length!==0){return false}k=e('<div id="Validform_msg"><div class="Validform_title">'+f.tit+'<a class="Validform_close" href="javascript:void(0);">&chi;</a></div><div class="Validform_info"></div><div class="iframe"><iframe frameborder="0" scrolling="no" height="100%" width="100%"></iframe></div></div>').appendTo("body");k.find("a.Validform_close").click(function(){k.hide();j=true;if(h){h.focus().addClass("Validform_error")}return false}).focus(function(){this.blur()});e(window).bind("scroll resize",function(){!j&&i(k,400)})}e.Showmsg=function(l){d();a.util.showmsg.call(g,l,1,{})};e.Hidemsg=function(){k.hide();j=true};e.fn.validate=function(l){return new a(this,e.extend({},{tiptype:3},l))}})(jQuery,window);